<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8">
</head>

<header th:fragment="headerFragment" class="absolute w-full z-40">

    <div sec:authorize="hasRole('ROLE_PREMEMBER')" class="bg-blue-600 h-12 flex items-center justify-center">
        <div class="text-gray-100">
            <span><b class="emailAuth fade cursor-pointer">ì´ë©”ì¼ ì¸ì¦</b> í›„, ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ë§Œë‚˜ë³´ì„¸ìš”!&nbsp;ğŸ˜</span>
        </div>
    </div>

    <div class="header">

        <nav class="container mx-auto p-4 md:p-6 md:flex md:items-center">

            <ul class="flex flex-row items-center justify-between">
                <a href="/" style="-webkit-tap-highlight-color: transparent;"><img src="/img/logo-w.png" alt="logo" class="w-28 ml-1" style="-webkit-user-drag: none;"></a>
                <button class="cursor-pointer w-12 rounded-lg px-1 py-1 text-gray-100 opacity-50 hover:opacity-75 md:hidden" style="-webkit-tap-highlight-color: transparent;">
                    <img src="/img/icons/icon_bar-w.png" alt="bar" class="btn-show-mobile-side-bar" style="-webkit-user-drag: none;">
                </button>
            </ul>

            <ul class="hidden md:flex flex-col items-center md:flex-row md:ml-auto mt-3 md:mt-0" id="navbar-collapse">

                <!-- isAnonymous()ëŠ” ë¡œê·¸ì¸ í•˜ì§€ ì•Šì€ ì¼ë°˜ ì‚¬ìš©ìë¥¼ ëœ»í•¨, ë¡œê·¸ì¸ í•˜ì§€ ì•Šì•˜ì„ë•Œë§Œ ë‚˜ì˜´ -->
                <li sec:authorize="isAnonymous()">
                    <!--  -->
                    <a th:text="#{member.login}" th:href="@{~/members/login}" class="p-2 lg:px-4 text-white text-center border border-transparent rounded hover:bg-gray-300 hover:text-black transition-colors duration-300">ë¡œê·¸ì¸</a>
                    <a th:text="#{member.join}" th:href="@{~/members/join}" class="p-2 lg:px-4 md:mx-2 text-white text-center border border-solid border-gray-300 rounded hover:bg-black hover:text-white transition-colors duration-300 mt-1 md:mt-0 md:ml-1">íšŒì›ê°€ì…</a>
                </li>

                <!-- ê¶Œí•œì´ ADMIN ì¼ ë•Œë§Œ ë³´ì„ -->
                <li sec:authorize="hasRole('ROLE_ADMIN')">
                    <a th:href="@{~/adm}" class="p-2 lg:px-4 md:mx-2 text-white text-center hover:underline transition-colors duration-300 mt-1 md:mt-0 md:ml-1">ê´€ë¦¬ì</a>
                </li>

                <!-- isAuthenticated()ëŠ” ë¡œê·¸ì¸ í•˜ê³  ì¸ì¦ì„ íšë“í•œ ì‚¬ìš©ì, ë¡œê·¸ì¸ í–ˆì„ë•Œ ë‚˜ì˜´ -->
                <!-- principal ê°ì²´ êº¼ë‚´ì˜¬ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•˜ê¸° -->
                <li sec:authorize="isAuthenticated()" class="cursor-pointer text-white flex justify-center px-3 py-1 md:mx-2 md:mt-0 md:ml-1 border border-gray-300 text-center rounded-full bg-none hover:bg-gray-100 hover:text-black transition-colors">
                    <a id="headProfile"  class="inline-block flex flex-row items-center">
                        <img src="https://picsum.photos/25/25" alt="profile" class="rounded-full mr-2">
                        <span class="mr-2"><b sec:authentication="principal.username"></b>&nbsp;ë‹˜</span>
                        <img src="/img/icons/icon_arrow-b.png" alt="arrow" style="-webkit-user-drag: none;">
                    </a>
                    <div th:replace="fragments/headPopup::headPopupFragment"></div>
                </li>

            </ul>

        </nav>

    </div>

    <script>
      $("#headProfile").click(function () {
          $("#headPopup").toggle(150);
      });

        function sendAuth(){
            $('.emailAuth').click(function(){
                $.ajax({
                    url : "/mail/send/auth/"
                    ,type : "GET"
                    ,data : ""
                    ,success : function() {

                        alert("ë©”ì¼ ë°œì†¡ ì™„ë£Œ, ë©”ì¼ì„ í™•ì¸í•´ì£¼ì„¸ìš”.");
                        location.reload();
                    }
                    ,error: function () {
                        alert('ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨');
                    }
                })
            });
        }
        sendAuth();
    </script>

</header>

</html>