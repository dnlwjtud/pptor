<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/pptForm}">

    <head>
        <title>온라인 마크다운 PPT 서비스! 피피토 | PPT 수정</title>
        <script>
                function write__submit(form){

                    form.title.value = form.title.value.trim();

                    if ( form.title.value.length == 0 ) {
                        alert('제목을 입력하여 주시기 바랍니다.');
                        form.title.focus();
                        return;
                    }

                    const bodyEditor = $(form).find('.toast-ui-body').data('data-toast-editor');
                    const body = bodyEditor.getMarkdown().trim();

                    if ( body.length == 0 ) {
                        bodyEditor.focus();
                        alert('내용을 입력하여 주시기 바랍니다.');
                        return;
                    }

                    form.body.value = body;

                    form.submit();

                }
            </script>
    </head>

    <div layout:fragment="content">
        <form action="../article/modify" th:action th:object="${articleModifyForm}" method="post" onsubmit="write__submit(this); return false;">
            <input type="hidden" name="body">
            <div class="title-wrapper">
                <input th:field="*{title}" th:errorclass="field-error" type="text" name="title" th:value="${title}"  th:placeholder="#{usr.article.title}">
                <div class="field-error" th:errors="*{title}">
                    제목을 입력해주세요.
                </div>
            </div>
            <div class="toast-ui-editor toast-ui-body"></div>
            <div>
                <button th:text="#{article.modify}" type="submit">템플릿 수정하기</button>
                <a href="../list" class = "px-6">
                    <button th:text="#{button.cancel}">취소</button>
                </a>
            </div>
        </form>
    </div>

</html>